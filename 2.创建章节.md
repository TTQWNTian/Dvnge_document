# 2.创建章节

**作者：Tian**

> **这一篇文档会说明本引擎如何创建章节。** 

---

### ./js/章节/文件

首先咱们打开`./js/章节/`目录，里面会有`序章.js`和`第一章.js`两个初始文件。其中`序章.js`是必要的，游戏最开始就是从这个文件执行，如果实在不想要这个名字，见后 “**自定义初始章节**” 处 。

### 创建章节文件

新建一个后缀为`.js`的文件，前缀命名成什么都行。
然后在文件中输入以下代码：
```
const 你的章节名称数据 = [
    
];
```

`const`后面的常量名称只要符合js常量命名规范可以随便写，数据二字也是可加可不加，详见 “**自定义初始章节**”。

### 在`TTQ视觉小说引擎.js`的设置

然后打开`TTQ视觉小说引擎.js`文件，找到`章节库`，此时这段的内容是这样的：
```
const 章节库 = {
  "序章": typeof 序章数据 !== 'undefined' ? 序章数据 : [],
  "第一章": typeof 第一章数据 !== 'undefined' ? 第一章数据 : []
};
```

然后我们需要在`"序章": typeof 序章数据 !== 'undefined' ? 序章数据 : [],`的后面加上：
```
"你的章节名称": typeof 你的章节名称数据 !== 'undefined' ? 你的章节名称数据 : [],
```

这样在`TTQ视觉小说引擎.js`文件中的章节设置就完成啦~

完成之后，正确的章节库代码应该是这样的：
```
const 章节库 = {
  "序章": typeof 序章数据 !== 'undefined' ? 序章数据 : [],
  "你的章节名称": typeof 你的章节名称数据 !== 'undefined' ? 你的章节名称数据 : [],
  "第一章": typeof 第一章数据 !== 'undefined' ? 第一章数据 : []
};
```

### 章节在`index.html`的引用

很简单，找到文件最低部的：
```
<!-- 章节加载（每新建一个章节就要在章节库中增加） -->
    <script src="js/章节/序章.js"></script>
    <script src="js/章节/第一章.js"></script>
```

在里面引用你的章节文件，代码如下：
```
<script src="js/章节/你的章节名称.js"></script>
```

完成之后这段的代码应该是这样的：
```
<!-- 章节加载（每新建一个章节就要在章节库中增加） -->
    <script src="js/章节/序章.js"></script>
    <script src="js/章节/你的章节名称.js"></script>
    <script src="js/章节/第一章.js"></script>
```

这样就完全完成创建章节的设置了。

### 自定义初始章节

想要重新设定开始文件？打开`TTQ视觉小说引擎.js`文件，找到靠下的`// 初始化游戏`这块的此段代码：
```
if (章节库.序章?.length) {
      切换章节('序章', 0);
    } else {
      throw new Error("缺少开始章节数据");
}
```

把里面的`序章`换成你的开始文件前缀就OK啦~

如果你没有在创建的章节`const`后面写 “数据” 二字，那么也别忘了在`TTQ视觉小说引擎.js`文件中的`章节库`里面，把它删掉，这个就不要用搜索替换了，因为文件中还有其他必要的“数据”代码。

总的来说就是`const 你的章节名称数据 = [];`的常量命名成什么，那在`章节库`中的"`你的章节名称": typeof 你的章节名称数据 !== 'undefined' ? 你的章节名称数据 : [],`类型也命名成什么。

---

> 好的👌这一篇就到这了~
> 下一篇[3.编辑对话](3.编辑对话.md)会说明如何设置简单的对话框。
